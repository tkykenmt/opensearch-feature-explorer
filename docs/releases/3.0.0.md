# OpenSearch 3.0.0 Release Analysis

## Overview

OpenSearch 3.0.0 is a major release delivering significant upgrades for performance, data management, security, vector database functionality, and more. This release includes breaking changes, new features, and experimental capabilities.

**Release Date:** April 28, 2025

## Key Highlights

### Performance Improvements

| Feature | Improvement | Details |
|---------|-------------|---------|
| Range Queries | 25% faster | Smarter strategies for numeric and date fields reduce I/O operations |
| High-Cardinality Queries | 75% reduction in p90 latency | Execution hints for cardinality aggregation |
| Concurrent Segment Search (k-NN) | Up to 2.5x faster | Enabled by default, with 20% improvement in tail latencies |
| Derived Source for k-NN | Up to 30x improvement | Cold start query latencies, 3x storage reduction |
| Star-Tree Indexing | Up to 100x reduction | Query work for metric aggregations and filtered terms queries |

### New Features

#### Search & Query Enhancements
- **Semantic Sentence Highlighting**: Context-aware highlighting based on meaning, not just keywords
- **Z-Score Normalization**: New statistical approach for hybrid search score normalization
- **Lower Bound Min-Max Normalization**: Prevents over-amplification of low scores in hybrid search
- **Inner Hits Support**: Detailed visibility for nested or parent-join fields in hybrid queries
- **PPL Enhancements**: New lookup, join, and subsearch commands backed by Apache Calcite

#### Vector Search (k-NN)
- **Explain Parameter for Faiss**: Detailed insights into k-NN query scoring processes
- **Node-Level Circuit Breakers**: Heterogeneous circuit breaker limits for mixed-hardware environments
- **Memory-Optimized Search Mode**: Run vector search under memory-constrained environments

#### Data Management
- **Pull-Based Ingestion**: Fetch data directly from Apache Kafka and Amazon Kinesis
- **Scale to Zero**: Separate indexing and search traffic with `_scale` API for read-heavy workloads
- **Star-Tree Indexing Expansion**: Support for metric aggregations and filtered terms queries

#### Security
- **New Security Framework**: Java agent replaces Java Security Manager
- **Optimized Privilege Evaluation**: Reduced serialization overhead in Security plugin
- **New PGP Key**: Updated artifact verification (valid through March 6, 2027)

#### Observability & Monitoring
- **Query Insights Improvements**: Live queries API, verbose parameter, dynamic columns
- **Contextual Anomaly Detection**: Launch anomaly detector from dashboard with auto-populated logs

### Experimental Features

| Feature | Description |
|---------|-------------|
| GPU Acceleration | Up to 9.3x faster indexing, 3.75x cost reduction vs CPU |
| gRPC Transport | Protocol buffers over gRPC for reduced serialization overhead |
| Pull-Based Ingestion | Native backpressure handling from Kafka/Kinesis |
| MCP Support | Model Context Protocol for AI agent integration |
| Plan-Execute-Reflect Agent | Autonomous problem-solving for complex tasks |

## Breaking Changes

### Core Changes
- **Lucene 10.1.0 Upgrade**: Major search engine upgrade
- **JDK 21 Minimum**: Required Java runtime version
- **BM25 Scoring Default**: Changed from LegacyBM25Similarity to BM25Similarity
- **Apache HttpClient 5.x**: Client transport migration

### API Changes
- Removed deprecated `batch_size` parameter from `_bulk`
- Added `cluster:monitor/shards` permission for `_cat/shards`
- 512 byte `_id` size limit enforced on Bulk Index API
- Maximum depth setting for nested queries

### Removed Features
- Java Security Manager (replaced by Java agent)
- transport-nio plugin
- COMPAT locale provider
- mmap.extensions setting
- Various deprecated thread pool settings

### Plugin-Specific Breaking Changes

#### k-NN
- Removed `ef_construction`, `m`, and `space_type` from index settings
- Removed KNN Plugin enabled setting

#### SQL
- Removed SparkSQL support
- Removed opendistro settings and endpoints
- Deprecated SQL Delete statement and scroll API usage

#### Security
- Removed OpenSSL provider
- Removed whitelist settings (use allowlist)

## Deprecation Notices

- **Ubuntu Linux 20.04**: Support will be deprecated (EOL April 2025)
- **Amazon Linux 2 on Dashboards**: Support will be deprecated due to Node.js 18 EOL

## OpenSearch Dashboards 3.0.0

### Breaking Changes
- Removed `CssDistFilename`
- Removed `withLongNumerals` in `HttpFetchOptions`
- Removed `@elastic/filesaver`
- Bumped `monaco-editor` to 0.52.0
- Removed deprecated "newExperience" table option in Discover

### New Features
- Autocomplete value suggestion
- CSV export from Discover page
- Improved scrolling experience on Discover page
- Streaming support for event stream content type
- MDS support for msearch

## Migration Considerations

### Before Upgrading
1. Ensure JDK 21 is installed
2. Review and update any deprecated API usage
3. Update k-NN index settings (remove deprecated parameters)
4. Migrate from whitelist to allowlist settings in Security
5. Update PGP keys for artifact verification

### Compatibility Notes
- Plugins must be updated for Lucene 10.1.0 compatibility
- Custom scripts using deprecated JodaCompatibleZonedDateTime methods need updates
- Security policies need migration from JSM to Java agent format

## Resources

- [Full Release Notes](https://github.com/opensearch-project/opensearch-build/blob/main/release-notes/opensearch-release-notes-3.0.0.md)
- [Breaking Changes Meta Issue](https://github.com/opensearch-project/opensearch-build/issues/5243)
- [OpenSearch 3.0.0 Artifacts](https://opensearch.org/artifacts/by-version/#release-3-0-0)
- [Verify Signatures](https://opensearch.org/verify-signatures.html)
