---
tags:
  - domain/security
  - component/server
  - security
---
# Correlation Alerts

## Summary

This release adds API role permissions for correlation alerts in the Security Analytics plugin. Users can now properly access correlation alert APIs with appropriate role-based access control, enabling secure management of alerts generated by correlation rules.

## Details

### What's New in v2.17.0

The security plugin now includes permissions for the new correlation alerts feature introduced in Security Analytics. Two PRs added and refined the necessary cluster permissions:

1. **Initial API roles** (PR #4689): Added new cluster permissions for correlation alerts to the predefined security roles
2. **Permission refinement** (PR #4704): Changed the `security_analytics_ack_alerts` role to use wildcard permission for correlation alerts, allowing users who can acknowledge alerts to also view them

### Technical Changes

#### New Permissions

The following cluster permissions were added for correlation alerts:

| Permission | Description |
|------------|-------------|
| `cluster:admin/opensearch/securityanalytics/correlationAlerts/get` | Get/list correlation alerts |
| `cluster:admin/opensearch/securityanalytics/correlationAlerts/ack` | Acknowledge correlation alerts |
| `cluster:admin/opensearch/securityanalytics/correlationAlerts/*` | Full access to correlation alerts |

#### Role Updates

| Role | Permission Added |
|------|------------------|
| `security_analytics_read_access` | `correlationAlerts/get` |
| `security_analytics_full_access` | `correlationAlerts/*` |
| `security_analytics_ack_alerts` | `correlationAlerts/*` (changed from `correlationAlerts/ack`) |

### Configuration Changes

The `config/roles.yml` file was updated to include the new permissions in the predefined Security Analytics roles.

```yaml
security_analytics_read_access:
  reserved: true
  cluster_permissions:
    - 'cluster:admin/opensearch/securityanalytics/correlationAlerts/get'
    # ... other permissions

security_analytics_full_access:
  reserved: true
  cluster_permissions:
    - 'cluster:admin/opensearch/securityanalytics/correlationAlerts/*'
    # ... other permissions

security_analytics_ack_alerts:
  reserved: true
  cluster_permissions:
    - 'cluster:admin/opensearch/securityanalytics/correlationAlerts/*'
    # ... other permissions
```

### Usage Example

Users with the `security_analytics_read_access` role can list correlation alerts:

```bash
GET /_plugins/_security_analytics/correlationAlerts
```

Users with `security_analytics_ack_alerts` or `security_analytics_full_access` can acknowledge alerts:

```bash
POST /_plugins/_security_analytics/_acknowledge/correlationAlerts
{
   "alertIds": ["alert-id-1", "alert-id-2"]
}
```

## Limitations

- Correlation alerts are only generated for rule-based correlations, not auto-correlations
- The permissions are specific to the Security Analytics plugin's correlation alerts feature

## References

### Documentation
- [Correlation Engine APIs](https://docs.opensearch.org/2.17/security-analytics/api-tools/correlation-eng/): Official documentation
- [Working with Alerts](https://docs.opensearch.org/2.17/security-analytics/usage/alerts/): Security Analytics alerts documentation

### Pull Requests
| PR | Description |
|----|-------------|
| [#4689](https://github.com/opensearch-project/security/pull/4689) | Added API roles for correlationAlerts (backport to 2.x) |
| [#4704](https://github.com/opensearch-project/security/pull/4704) | Permission changes for correlationAlerts (backport to 2.17) |
| [#4688](https://github.com/opensearch-project/security/pull/4688) | Original PR: Added API roles for correlationAlerts |
| [#4701](https://github.com/opensearch-project/security/pull/4701) | Original PR: Permission changes for correlationAlerts |

### Issues (Design / RFC)
- [Issue #988](https://github.com/opensearch-project/security-analytics/issues/988): Feature request - Alerts in Correlations

## Related Feature Report

- [Full feature documentation](../../../../features/security/security-correlation-alerts.md)
